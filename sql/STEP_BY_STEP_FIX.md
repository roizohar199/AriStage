# מדריך תיקון בעיית ה-Encoding - שלב אחר שלב

## ⚠️ חשוב להבין:
הנתונים שכבר נשמרו במסד הנתונים עם encoding שגוי (סימני שאלה) **לא יכולים להיות מתוקנים אוטומטית**. 
הם כבר נשמרו כסימני שאלה ולא ניתן לשחזר את הטקסט המקורי.

## מה כן אפשר לעשות:

### 1. לתקן את ה-encoding של הטבלאות (לעתיד)
זה יוודא שכל הנתונים החדשים יישמרו נכון.

### 2. לעדכן את הנתונים הקיימים ידנית
צריך לעדכן את השמות דרך ממשק המערכת (Settings) או ישירות ב-SQL.

---

## שלב 1: תיקון ה-encoding של הטבלאות

1. פתח **phpMyAdmin**: `http://localhost/phpmyadmin`
2. בחר את מסד הנתונים **`ari_stage`**
3. לחץ על הלשונית **SQL**
4. העתק והדבק את התוכן של `sql/fix_encoding_complete.sql`
5. לחץ **Go**

זה יתקן את ה-encoding של כל הטבלאות והעמודות.

---

## שלב 2: עדכון הנתונים הקיימים

יש לך שתי אפשרויות:

### אפשרות א': דרך ממשק המערכת (מומלץ)
1. התחבר למערכת
2. לך ל-**Settings**
3. עדכן את השם שלך (הקלד בעברית)
4. שמור

### אפשרות ב': ישירות ב-SQL
1. פתח **phpMyAdmin**
2. בחר את מסד הנתונים **`ari_stage`**
3. לחץ על הלשונית **SQL**
4. הרץ את השאילתה הבאה (עדכן לפי הצורך שלך):

```sql
-- עדכון שם משתמש ספציפי
UPDATE users SET full_name = 'משה' WHERE id = 1;
UPDATE users SET full_name = 'יואב לוי' WHERE id = 2;
-- וכו'...
```

---

## שלב 3: הפעלה מחדש של השרת

לאחר תיקון ה-encoding, הפעל מחדש את השרת:

```bash
cd server
npm start
```

---

## בדיקה שהכל עובד

1. עדכן שם משתמש דרך ממשק המערכת
2. בדוק ב-phpMyAdmin שהשם מופיע נכון בעברית
3. אם זה עובד - מעולה! ✅

---

## למה זה קרה?

הבעיה נגרמה כי:
1. הטבלאות לא היו מוגדרות עם `utf8mb4` מלכתחילה
2. החיבור ל-DB לא הגדיר charset נכון
3. הנתונים נשמרו עם encoding שגוי

**עכשיו תיקנו את זה** - כל הנתונים החדשים יישמרו נכון! ✅

